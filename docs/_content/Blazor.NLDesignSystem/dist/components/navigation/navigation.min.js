/*!
NL Design System Componenten library 0.1.1, build date 27-06-2020
Copyright 2011-2020 The NL Design System Authors
Copyright 2011-2020 Duo
Author: DUO & The NL Design System Authors
Author URI: https://nl-design-system.gitlab.io/nl-design-system/
License: EUPL v1.2
License URL: https://joinup.ec.europa.eu/software/page/eupl5
Version: 0.1.1
*/
var utils_1=require("../../core/utils"),RESIZE_THROTTLE=200,MOBILE_WIDTH=544,AutoResizeNavigation=function(){function e(e){if(this.host=e,this._navWidth=0,!e)throw new Error("host element not defined");if(!e.classList.contains("top-nav-autoresize"))throw new Error("host element should have class top-nav-autoresize");if(!utils_1.Utils.FindParentContainingClass(e,"container",document.body))throw new Error("Autoresize navigation should be in parent with class container");if(!e.querySelector("ul.nav"))throw new Error("host element should have child ul with class nav");this._ul=e.querySelector("ul.nav"),this._setup()}return e.prototype._createMoreNav=function(){this._moreNav=document.createElement("li"),this._moreNav.classList.add("nav__item"),this._moreNav.classList.add("nav__item--more"),this._moreNav.innerHTML='\n            <a href="#" class="nav__link nav__link--more">Meer</a>\n            <ul class="nav__more"></ul>',this._createClones(),this._ul.appendChild(this._moreNav),this._navClickListener=this._navClassToggle(this._moreNav,"nav__item--more-open").bind(this),this._moreNav.querySelector("a").addEventListener("click",this._navClickListener)},e.prototype._navClassToggle=function(t,i){return function(e){e.preventDefault(),e.stopPropagation(),t.classList.toggle(i)}},e.prototype._onWindowClick=function(){this._moreNav.classList.remove("nav__item--more-open")},e.prototype._setup=function(){this.resizeListener=this._onScreenResize.bind(this),this.windowClickListener=this._onWindowClick.bind(this),window.addEventListener("resize",this.resizeListener),window.addEventListener("click",this.windowClickListener),this._createMoreNav(),this._storeWidths(),this._setFlexClasses();for(var e=this._ul.querySelectorAll(".nav__item--disabled"),t=0;t<e.length;t++)e.item(t).querySelector("a").setAttribute("tabindex","-1");this._rearrange()},e.prototype._setFlexClasses=function(){for(var e=this.host;e.nextElementSibling;)(e=e.nextElementSibling).classList.add("autoresize__sibling");for(e=this.host;e.previousElementSibling;)(e=e.previousElementSibling).classList.add("autoresize__sibling")},e.prototype._rearrange=function(){this.host.classList.add("top-nav-autoresize--setup");var e=parseInt(getComputedStyle(this._ul).width);this.host.classList.remove("top-nav-autoresize--setup"),document.body.offsetWidth<=MOBILE_WIDTH&&(e=0);var t=this._navWidth,i=this._ul.querySelectorAll(".nav__item:not(.nav__item--clone)"),n=this._ul.querySelectorAll(".nav__item--clone"),s=i.length-1;for(i.item(0).style.maxWidth="";0<--s;)i.item(s).classList.remove("nav__item--hidden"),n.item(s).classList.add("nav__item--hidden");s=i.length-1;for(;e<t&&0<--s;){var o=i.item(s),r=n.item(s);o.classList.add("nav__item--hidden"),r.classList.remove("nav__item--hidden"),0,t-=parseInt(o.getAttribute("data-width"))}0===s?(this._moreNav.querySelector(".nav__link--more").innerHTML="MENU",i.item(0).classList.add("nav__item--hidden"),n.item(0).classList.remove("nav__item--hidden"),this._moreNav.classList.add("nav__item--minified")):(this._moreNav.querySelector(".nav__link--more").innerHTML="Meer",i.item(0).classList.remove("nav__item--hidden"),n.item(0).classList.add("nav__item--hidden"),this._moreNav.classList.remove("nav__item--minified")),null===this._ul.querySelector(".nav__item--clone:not(.nav__item--hidden)")?this._moreNav.classList.add("nav__item--hidden"):this._moreNav.classList.remove("nav__item--hidden")},e.prototype._createClones=function(){for(var e=this._moreNav.querySelector("ul"),t=this._ul.querySelectorAll(".nav__item"),i=0;i<t.length;i++){var n=t.item(i).cloneNode(!0);n.removeAttribute("id"),n.classList.add("nav__item--clone"),n.classList.add("nav__item--hidden"),e.appendChild(n)}},e.prototype._onScreenResize=function(){clearTimeout(this._resizeTimeout),this._resizeTimeout=window.setTimeout(this._rearrange.bind(this),RESIZE_THROTTLE)},e.prototype._storeWidths=function(){this.host.classList.add("top-nav-autoresize--setup");for(var e=this._ul.querySelectorAll(".nav__item:not(.nav__item--clone)"),t=0;t<e.length;t++){var i=e.item(t),n=Math.ceil(parseFloat(getComputedStyle(i).width));n+=Math.ceil(parseFloat(getComputedStyle(i).marginLeft)),n+=Math.ceil(parseFloat(getComputedStyle(i).marginRight)),this._navWidth+=n,i.setAttribute("data-width",n.toString())}this.host.classList.remove("top-nav-autoresize--setup")},e.prototype.destroy=function(){window.removeEventListener("resize",this.resizeListener),window.removeEventListener("click",this.windowClickListener),this._moreNav.querySelector("a").removeEventListener("click",this._navClickListener)},e}();exports.AutoResizeNavigation=AutoResizeNavigation;var SubMenuNavigation=function(){function e(e){if(!(this.host=e))throw new Error("host element not defined");if(!e.classList.contains("nav--submenu"))throw new Error("host element should have class nav--submenu");if(!utils_1.Utils.FindParentContainingClass(e,"container",document.body))throw new Error("Submenu navigation should be in parent with class container");if(!e.querySelector("li.nav__item--parent"))throw new Error("host element should have child li with class nav__item--parent");for(var t=e.querySelectorAll(".nav__item--parent"),i=0;i<t.length;i++){var n=t.item(i);if(!n.querySelector("a.nav__link--parent"))throw new Error("host element should have child a with class nav__link--parent");if(!n.querySelector("ul.nav__submenu"))throw new Error("host element should have child ul with class nav__submenu");this._navClickListener=this._navClassToggle(n,"nav__item--parent-open").bind(this),n.querySelector("a").addEventListener("click",this._navClickListener),this.windowClickListener=this._navClassRemove(n,"nav__item--parent-open").bind(this),window.addEventListener("click",this.windowClickListener)}}return e.prototype._navClassToggle=function(t,i){return function(e){e.preventDefault(),e.stopPropagation(),t.classList.toggle(i)}},e.prototype._navClassRemove=function(e,t){return function(){e.classList.remove(t)}},e.prototype.destroy=function(){for(var e=this.host.querySelectorAll(".nav__item--parent"),t=0;t<e.length;t++){e.item(t).querySelector("a").removeEventListener("click",this._navClickListener)}window.removeEventListener("click",this.windowClickListener)},e}();exports.SubMenuNavigation=SubMenuNavigation;