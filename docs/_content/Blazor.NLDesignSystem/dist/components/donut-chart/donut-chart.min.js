/*!
NL Design System Componenten library 0.1.1, build date 27-06-2020
Copyright 2011-2020 The NL Design System Authors
Copyright 2011-2020 Duo
Author: DUO & The NL Design System Authors
Author URI: https://nl-design-system.gitlab.io/nl-design-system/
License: EUPL v1.2
License URL: https://joinup.ec.europa.eu/software/page/eupl5
Version: 0.1.1
*/
var INNER_COLOR="#ffffff",GLOBAL_ALPHA_OPACITY=.2,DonutChart=function(){function t(t){if(this.element=t,this._value=0,!t)throw new Error("No element provided");this.setup(),this.setupListeners()}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){if(!(t<=100&&0<=t))throw new Error("Value should be a percentage and therefore between (and including) 0 and 100");this._value=t},enumerable:!0,configurable:!0}),t.prototype.setup=function(){this.canvas=this.element.getElementsByTagName("canvas")[0],this.ctx=this.canvas.getContext("2d"),this.setColor(),this.setSize(),this.setInner()},t.prototype.setInner=function(){var t=this.element.getElementsByClassName("donut-chart__inner")[0];if(!t)throw new Error('No element with class "donut-chart__inner" found');var e=2*this.radius-this.arcWidth,i=Math.sqrt(Math.pow(e,2)/2);t.style.width=i+"px",t.style.height=i+"px"},t.prototype.setupListeners=function(){var t=this;window.addEventListener("resize",this.debounce(function(){return t.updateSize()},250))},t.prototype.draw=function(){var t=this.calcOffset(),e=this.calcSwitchPoint(t),i=this.calcStartPoint(t),n=this.calcEndPoint(t);this.ctx.beginPath(),this.ctx.lineWidth=this.arcWidth,this.ctx.arc(this.xCoord,this.yCoord,this.radius,i,e),this.ctx.strokeStyle=this.color,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(this.xCoord,this.yCoord,this.radius,e,n),this.ctx.strokeStyle=this.color,this.ctx.globalAlpha=GLOBAL_ALPHA_OPACITY,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.fillStyle=INNER_COLOR,this.ctx.fill()},t.prototype.calcOffset=function(){return.5*-Math.PI},t.prototype.calcStartPoint=function(t){return 0+t},t.prototype.calcSwitchPoint=function(t){return this._value/100*(2*Math.PI)+t},t.prototype.calcEndPoint=function(t){return 2*Math.PI+t},t.prototype.setColor=function(){var t=window.getComputedStyle(this.element);this.color=t.color},t.prototype.setSize=function(){var t=this.canvas.clientWidth,e=window.devicePixelRatio;this.canvas.style.height=t+"px",this.canvas.height=t*e,this.canvas.width=t*e,this.yCoord=t*e/2,this.xCoord=t*e/2,this.arcWidth=t*e*.1,this.radius=t*e/2-this.arcWidth},t.prototype.updateSize=function(){this.setSize(),this.setInner(),this.draw()},t.prototype.destroy=function(){var t=this;window.removeEventListener("resize",this.debounce(function(){return t.updateSize()},250))},t.prototype.debounce=function(i,n){var o;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];window.clearTimeout(o),o=window.setTimeout(function(){i.apply(void 0,t)},n)}},t}();exports.DonutChart=DonutChart;